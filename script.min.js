const API_URL="https://api.github.com/users/",main=document.getElementById("main"),form=document.getElementById("form"),search=document.getElementById("search");async function getUser(username){try{const{data:data}=await axios(API_URL+username);createUserCard(data),getRepos(username)}catch(err){404==err.response.status&&createErrorCard("Aucun profil avec ce nom d'utilisateur")}}async function getRepos(username){try{const{data:data}=await axios(API_URL+username+"/repos?sort=created");addReposToCard(data)}catch(err){createErrorCard("Problème lors de la récupération des repos")}}function createUserCard(user){const userId=user.name||user.login,userBio=user.bio?`<p>${user.bio}</p>`:"",cardHtml=`\n      <div class="card">\n        <div>\n          <img src="${user.avatar_url}" alt="${user.name}" class="avatar">\n        </div>\n        <div class="user-info">\n          <h2>${userId}</h2>\n          ${userBio}\n          <ul>\n            <li>${user.followers} <strong>Followers</strong></li>\n            <li>${user.following} <strong>Following</strong></li>\n            <li>${user.public_repos} <strong>Repos</strong></li>\n          </ul>\n          <div id="repos"></div>\n        </div>\n      </div>\n    `;main.innerHTML=cardHtml}function createErrorCard(msg){const cardHtml=`\n      <div class="card">\n        <h1>${msg}</h1>\n      </div>\n    `;main.innerHTML=cardHtml}function addReposToCard(repos){const reposEl=document.getElementById("repos");repos.slice(0,5).forEach(repo=>{const repoEl=document.createElement("a");repoEl.classList.add("repo"),repoEl.href=repo.html_url,repoEl.target="_blank",repoEl.innerText=repo.name,reposEl.appendChild(repoEl)})}form.addEventListener("submit",e=>{e.preventDefault();const user=search.value;user&&(getUser(user),search.value="")});